syntax = "proto3";

option go_package = "github.com/Amir-Mallek/Distributed-Dataset-Repository/api/chunktransfer";

package chunktransfer;

import "google/protobuf/empty.proto";

service ChunkTransferService {
  rpc CreateChunk(CreateChunkRequest) returns (google.protobuf.Empty);
  rpc WriteBlock(stream WriteBlockRequest) returns (google.protobuf.Empty);
  rpc ReadFromChunk(ReadFromChunkRequest) returns (stream ChunkData);
}

message CreateChunkRequest {
  uint32 chunkId = 1;
  string clientId=2;
  string datasetId=3;
  uint32 chunkSize=4;
}

message WriteBlockRequest {
  uint32 chunkId = 1;
  string clientId=2;
  string datasetId=3;
  uint32 blockIndex = 4;
  bytes data = 5;
  fixed32 checksum = 6;
}

message ReadFromChunkRequest {
  uint32 chunkId = 1;
  string clientId=2;
  string datasetId=3;
  uint32 rangeStart = 4;
  uint32 rangeEnd = 5;
}

message ChunkData {
  bytes data = 1;
}